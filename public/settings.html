<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>設定 - DeepSK</title>
    <link rel="stylesheet" href="style.css">
</head>

<!-- ⭐ 同時載入暱稱 + 音樂狀態 -->
<body class="bg-paper" onload="loadSettingsPage(); initBGM(); checkLogin();">

<!-- ⭐ 返回：依來源決定 home 或 game -->
<button class="btn-back" id="btnBack">← 返回</button>

<div class="settings-box">

    <img src="Settings icon.PNG" class="logo-plant">

    <h2>遊戲設定 Game Settings</h2>

    <!-- ======================
         顯示目前暱稱
    ======================== -->
    <label>目前暱稱：</label>
    <p id="current-name" class="current-name">（讀取中…）</p>

    <!-- ======================
         修改暱稱
    ======================== -->
    <label>修改暱稱：</label>
    <input id="new-name" type="text" class="input-wood" placeholder="輸入新暱稱">

    <button class="btn-wood" onclick="saveNewName()">儲存變更</button>

    <!-- ======================
         音樂設定
    ======================== -->
    <label style="margin-top: 25px;">背景音樂：</label>

    <button id="music-btn" class="btn-wood" onclick="toggleMusic()">
        Loading...
    </button>

</div>

<script src="main.js"></script>
<script>
    const params = new URLSearchParams(window.location.search);
    const from = params.get('from') === 'game' ? 'game' : 'home';
    const backTarget = from === 'game' ? 'game.html' : 'home.html';

    document.getElementById('btnBack').onclick = () => { window.location.href = backTarget; };
</script>

</body>
</html>
